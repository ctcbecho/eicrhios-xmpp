<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
	xmlns:bp="http://www.osgi.org/xmlns/blueprint/v1.0.0" xmlns:cm="http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.1.0"
	xmlns:ext="http://aries.apache.org/blueprint/xmlns/blueprint-ext/v1.0.0">

	<cm:property-placeholder persistent-id="idv.kaomk.eicrhios.shell.xmpp"
		update-strategy="reload">
		<cm:default-properties>
			<cm:property name="host" value="" />
			<cm:property name="port" value="-1" />
			<cm:property name="serviceName" value="" />
			<cm:property name="httpproxy.host" value="" />
			<cm:property name="httpproxy.port" value="-1" />
			<cm:property name="allowUsers" value=""/>
			<cm:property name="karaf.name" value="root"/>
			<cm:property name="consoleUser" value="karaf"/>
		</cm:default-properties>
	</cm:property-placeholder>

	<reference id="commandProcessor"
		interface="org.apache.felix.service.command.CommandProcessor" />

	<bean id="xmppConsoleAgent" class="idv.kaomk.eicrhios.shell.xmpp.XMPPConsoleAgent"
		init-method="connect" destroy-method="disconnect">
		<property name="commandProcessor" ref="commandProcessor" /> 
		<property name="host" value="${host}" />
		<property name="port" value="${port}" />
		<property name="serviceName" value="${serviceName}" />
		<property name="httpProxyHost" value="${httpproxy.host}" />
		<property name="httpProxyPort" value="${httpproxy.port}" />
		<property name="username" value="${username}" />
		<property name="password" value="${password}" />
		<property name="allowUsers" value="${allowUsers}" />
		<property name="karafName" value="${karaf.name}" />
		<property name="consoleUser" value="${consoleUser}" />
	</bean>

	<!-- <command-bundle xmlns="http://karaf.apache.org/xmlns/shell/v1.0.0"> -->
	<!-- <command name="xmpp/start"> -->
	<!-- <action class="idv.kaomk.eicrhios.shell.xmpp.XMPPStartAction"> -->
	<!-- <property name="xmppConsoleAgent" ref="xmppConsoleAgent" /> -->
	<!-- </action> -->
	<!-- </command> -->
	<!-- </command-bundle> -->
</blueprint>
